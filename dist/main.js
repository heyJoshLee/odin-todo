(()=>{"use strict";const e=()=>({spawnElement:(e,t,o,n)=>{let d=document.createElement(e);return t&&(d.id=t),d.textContent=o,n.appendChild(d),d},spawnElementWithClass:(e,t,o,n)=>{let d=document.createElement(e);return d.classList.add(t),d.textContent=o,n.appendChild(d),d},spawnImage:(e,t)=>{const o=document.createElement("img");return o.src=e,t.appendChild(o),o},changeParent:function(e,t){e.remove(),t.append(e)}}),t=()=>{const{spawnElement:t,changeParent:o,spawnImage:n}=e();let d,r,c,i,l=document.querySelector("#page-container");const a=()=>{const e=t("div",`modal-${i}`,"",l);return e.classList.add("modal"),e},s=()=>{d||(d=a()),d.classList.toggle("hidden")};return(()=>{let e=document.querySelectorAll(".modal").length;i=++e})(),s(),{render:()=>{d||(d=a())},getModalDiv:()=>(d||(d=a()),d),changeParent:o,getCloseButton:()=>r,close:()=>{d.classList.add("hidden")},renderOpenButton:e=>{document.querySelector(`#modal-${i}-open-button`)?(c=document.querySelector(`#modal-${i}-open-button`),c.classList.add("modal-open-button")):(c=n("../src/images/plus.png",e),c.id=`'modal-${i}-open-button`,c.classList.add("modal-open-button")),c.addEventListener("click",(()=>{s()}))},renderCloseButton:e=>{document.querySelector(`#modal-${i}-close-button`)?(r=document.querySelector(`#modal-${i}-close-button`),r.classList.add("modal-close-button")):(r=n("../src/images/close.png",e),r.id=`'modal-${i}-close-button`,r.classList.add("modal-close-button")),r.addEventListener("click",(()=>{s()}))},getOpenButton:()=>c}},o=(t,o,n,d,r,c)=>{const{spawnElement:i,spawnElementWithClass:l,spawnImage:a}=e();document.querySelector("#current-project");let s=document.createElement("div");s.classList.add("todo");let u,p,m=t,g=o,v=n,j=d,h=r,y=c,P=!1;const I=()=>m,w=()=>g,C=()=>v,b=()=>h,L=()=>y,E=()=>{switch(j){case"1":return"low";case"2":return"medium";case"3":return"high"}},D=()=>{s.innerText="";P?(()=>{const e=l("div","todo-edit-heading","",s);i("input",`todo-${u}-edit-title-input`,"",e).value=I();const t=i("select",`todo-${u}-edit-priority-input`,"",e),o=i("option","","Low",t);o.value="1",o.value===E()&&(o.selected=!0);const n=i("option","","Medium",t);n.value="2",n.value===E()&&(n.selected=!0);const d=i("option","","High",t);d.value="3",d.value===E()&&(d.selected=!0);const r=a("../src/images/save.png",e);r.classList.add("save"),r.addEventListener("click",(()=>{P=!1,(()=>{const e=document.querySelector(`#todo-${u}-edit-title-input`).value,t=document.querySelector(`#todo-${u}-edit-priority-input`).value,o=document.querySelector(`#todo-${u}-edit-due-date-input`).value,n=document.querySelector(`#todo-${u}-edit-notes-input`).value,d=document.querySelector(`#todo-${u}-edit-description-input`).value,r=document.querySelector(`#todo-${u}-edit-completed-input`).checked;console.log(r),m=e,j=t,v=o,h=n,g=d,y=r})(),D()}));const c=l("div","todo-edit-body","",s),p=l("div","todo-edit-due-date-container","",c),L=i("input",`todo-${u}-edit-due-date-input`,"",p);L.type="date",L.value=C(),i("textarea",`todo-${u}-edit-description-input`,w(),c),i("textarea",`todo-${u}-edit-notes-input`,b(),c),i("label",`todo-${u}-edit-completed-label`,"Completed",c);const S=i("input",`todo-${u}-edit-completed-input`,"",c);S.type="checkbox",S.checked=y})():(()=>{const e=l("div","todo-heading","",s),t=l("div","todo-title",I(),e);L()&&t.classList.add("completed");const o=E();l("div","todo-priority",o,e).classList.add(o);const n=a("../src/images/arrow-down.png",e);n.classList.add("expand");const d=a("../src/images/edit.png",e);d.classList.add("edit"),d.addEventListener("click",(()=>{P=!0,D()}));const r=l("div","todo-body","",s);n.addEventListener("click",(()=>{r.classList.toggle("expanded")}));const c=l("div","todo-due-date-container","",r);l("div","todo-due-date",C(),c),a("../src/images/calendar.png",c),l("div","todo-description",w(),r),l("div","todo-notes",b(),r);const u=i("div","","",r);u.classList.add("mark-as-done-button"),u.addEventListener("click",(()=>{y=!y,D()})),y?(u.classList.add("complete"),u.textContent="Mark as incomplete"):u.textContent="Mark as done"})()};return{getTitle:I,getProjectId:()=>p,getDescription:w,getDueDate:C,getPriority:()=>j,getNotes:b,getCompleted:L,getTodoItemId:()=>u,setProjectId:e=>{p=e},getIsEditing:()=>P,setIsEditing:e=>{P=e,D()},getElement:()=>s,setTodoItemId:e=>{u=e},render:D}},n=(t,o,n,d,r)=>{const{spawnElementWithClass:c,spawnElement:i,spawnImage:l,changeParent:a}=e();let s,u,p,m,g,v=t,j=o,h=n,y=d,P=r,I=[],w=0,C=!1;const b=()=>{p&&(u=p.getCurrentProjectDiv(),s=document.querySelector("#page-container"),(()=>{u||(u=i("div","current-project","",s)),u.textContent="";C?(()=>{let e=c("div","project-header","",u);i("input",`project-${m}-edit-title-input`,"",e).value=v;const t=l("../src/images/save.png",e);t.classList.add("save"),t.addEventListener("click",(()=>{C=!1,(()=>{const e=document.querySelector(`#project-${m}-edit-title-input`).value;v=e})(),b()}));let o=i("div",`${m}-delete-button`,"delete",e);o.classList.add("project-delete-button"),o.addEventListener("click",(()=>{confirm("Are you sure you want to delete this project and all related todos?")&&p.deleteProjectById(m)}))})():(()=>{let e=c("div","project-header","",u);i("h1","",v,e);const t=l("../src/images/edit.png",e);t.classList.add("edit"),t.addEventListener("click",(()=>{C=!0,b()}));let o=i("div","todos-heading-container","",u);i("h2","","Todos",o),p&&p.getNewTodoFormModal().renderOpenButton(o),g&&g.renderOpenButton(o)})()})(),I.forEach((e=>{a(e.getElement(),u),e.render()})))};return b(),{title:v,description:j,dueDate:h,completed:P,projectId:m,notes:y,addTodoItem:e=>{e.setProjectId(m),e.setTodoItemId(++w),I.push(e),b()},setProjectsContainer:e=>{p=e},setProjectId:e=>{m=e.toString()},getProjectId:()=>m,setModal:e=>{g=e},render:b}},d=()=>{const{spawnElement:t,changeParent:o}=e();let d,r,c,i,l,a,s,u,p=document.createElement("form");const m=()=>({title:document.querySelector("#projectTitleInput").value,description:document.querySelector("#projectDescriptionInput").value,dueDate:document.querySelector("#projectDueDateInput").value,priority:document.querySelector("#projectPriorityInput").value,completed:document.querySelector("#projectCompletedInput").value});return{render:()=>{d=document.querySelector("#page-container"),p.id="new-project-form",u&&u.renderCloseButton(p),p.addEventListener("submit",(e=>{e.preventDefault();const t=(o=m().title,d=m().description,p=m().dueDate,g=m().priority,v=m().completed,n(o,d,p,g,v));var o,d,p,g,v;r.addProject(t),c.value="",i.value="",l.value="",a.value="",s.value="",console.log(u),u&&u.close()})),t("h2","","New Project",p),t("label","","Project Title",p).htmlFor="projectTitleInput",c=t("input","projectTitleInput","",p),c.name="title",t("label","","Project Description",p).htmlFor="projectDescriptionInput",i=t("textarea","projectDescriptionInput","",p),i.name="description",t("label","","Project dueDate",p).htmlFor="projectDueDateInput",l=t("input","projectDueDateInput","",p),l.type="date",l.name="dueDate",t("label","","Project Priority",p).htmlFor="projectPriorityInput",a=t("select","projectPriorityInput","",p),t("option","","Low",a).value="low",t("option","","Medium",a).value="medium",t("option","","High",a).value="high",t("label","","Project completed",p).htmlFor="projectCompletedInput",s=t("input","projectCompletedInput","",p),s.type="checkbox",s.name="completed",t("button","","Add New Project",p)},changeParent:o,setModal:function(e){u=e,o(p,u.getModalDiv())},getFormDiv:()=>p,setProjectsContainer:e=>{r=e}}},r=function(){const{spawnElement:n,spawnElementWithClass:r}=e(),c=document.querySelector("#page-container");let i,l,a=n("div","project-titles-container","content",c),s=n("div","current-project","",c),u=0,p=d(),m=t();p.setModal(m),p.render();let g=(()=>{const{spawnElement:t,changeParent:n}=e();let d,r,c,i,l,a,s,u,p=document.createElement("form");p.id="new-todo-form",p.addEventListener("submit",(e=>{e.preventDefault(),v(g().title,g().description,g().dueDate,g().priority,g().notes,g().completed),console.log("submit"),j(),h()}));const m=()=>{p.textContent="",u&&u.renderCloseButton(p),t("h2","","New todo for",p),d&&d.getCurrentProject()&&t("h3","",d.getCurrentProject().title,p),t("label","","Title",p).htmlFor="todo-title-input",r=t("input","todo-title-input","",p),r.name="title",t("label","","Description",p).htmlFor="todo-description-input",c=t("textarea","todo-description-input","",p),c.name="description",t("label","","Due Date",p).htmlFor="todo-due-date-input",i=t("input","todo-due-date-input","",p),i.type="date",i.name="dueDate",t("label","","Notes",p).htmlFor="todo-notes-input",l=t("textarea","todo-notes-input","",p),l.name="notes",t("label","","Priority",p).htmlFor="todo-priority-input",a=t("select","todo-priority-input","",p),t("option","","Low",a).value="low",t("option","","Medium",a).value="medium",t("option","","High",a).value="high",t("label","","Completed?",p).htmlFor="todo-completed-input",s=t("input","todo-completed-input","",p),s.type="checkbox",s.name="completed",t("button","","Add New Todo",p)},g=()=>({title:document.querySelector("#todo-title-input").value,description:document.querySelector("#todo-description-input").value,dueDate:document.querySelector("#todo-due-date-input").value,notes:document.querySelector("#todo-notes-input").value,priority:document.querySelector("#todo-priority-input").value,completed:document.querySelector("#todo-completed-input").value}),v=(e,t,n,r,c)=>{let i=o(e,t,n,r,c);d.getCurrentProject().addTodoItem(i)},j=()=>{r.value="",c.value="",i.value="",a.value="",s.value=""},h=()=>{u&&u.close()};return{render:m,changeParent:n,setModal:function(e){u=e,n(p,u.getModalDiv())},getFormDiv:()=>p,setProjectsContainer:e=>{d=e,m()}}})(),v=t();g.setModal(v),g.render();const j=[];j.length>0&&(i=j[0]);const h=function(e){e.setProjectId(++u),e.setProjectsContainer(this),j.push(e),e.render(),i=e,P()},y=e=>{i=j.find((t=>t.getProjectId()===e))},P=()=>{a.textContent="";const e=n("div","project-legend-and-button-container","",a);n("div","projects-list-header","Projects",e),m&&m.renderOpenButton(e),(()=>{const e=n("ul","project-list","",a);j.forEach((t=>((e,t)=>{const o=r("li","project-link","",e);o.dataset.projectId=t.getProjectId(),r("div","project-title-link",t.title,o),i&&i.getProjectId()===t.getProjectId()&&o.classList.add("current-project-nav"),o.addEventListener("click",(()=>{y(o.dataset.projectId),l||(l=document.querySelector("#current-project")),l.textContent="",i.render(),P()}))})(e,t)))})(),g.render()};return{render:P,projects:j,addProject:function(e){h.call(this,e),i=e,g.render()},setNewProjectFormModal:e=>{m=e},getNewProjectFormModal:()=>m,deleteProjectById:e=>{let t;t=j.find((t=>t.getProjectId()===e));let o=j.indexOf(t);j.splice(o,1),i=j[0],i.render(),P()},getCurrentProject:()=>i,getNewProjectForm:()=>p,getNewTodoFormModal:()=>v,getNewTodoForm:()=>g,getCurrentProjectDiv:()=>s,getProjectListContainerDiv:()=>a}}();r.getNewProjectForm().setProjectsContainer(r),r.getNewTodoForm().setProjectsContainer(r),function(){const e=o("cool title 1","description","2011-09-29","1","notes","completed"),t=n("do this 1","do this thing","2011-09-29","somet notes go here",!1),d=o("cool title 4","description","2011-09-29","2","notes","completed");r.addProject(t),t.addTodoItem(e),t.addTodoItem(d);const c=o("cool title 2","description","2011-09-29","3","notes","completed"),i=n("do this 2","do this thing","2011-09-29","somet notes go here",!1);r.addProject(i),i.addTodoItem(c),o("cool title 3","description","2011-09-29","1","notes","completed");const l=n("do this 3","do this thing","2011-09-29","somet notes go here",!1),a=o("cool title 5","description","2011-09-29","1","notes","completed"),s=o("cool title 6","description","2011-09-29","1","notes","completed");r.addProject(l),l.addTodoItem(a),l.addTodoItem(s),s.setIsEditing(!0),l.render()}(),r.render()})();
//# sourceMappingURL=main.js.map